var show_zero_price="",slidesT=["size","exterior","interior","layout","installation","summary"],$slide=$(".configuration-slide"),zz="22EP8BJUJKCW2YGUN8RS",hc="w-condition-invisible",sB=["upgrades","interior","services","exterior","layout"],sC=["price","model","load"],ccI=".collection-item",ccW=".collection-selection-wrapper",ccF="#model-item-selection",ccFM="#model-item-selection-multiple",ccM=".title-section",ccS=".summary-studio",formatter=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0});const lookup={"the-twelve":{"price-per-mile":3.5},"the-sixteen":{"price-per-mile":4}};var levels={multiple:[],simple:[]};function loadScript(url,callback){var head=document.head,script=document.createElement("script");script.type="text/javascript",script.src=url,script.onreadystatechange=callback,script.onload=callback,head.appendChild(script)}var shippingCost=null;const redirectToStripe=function(){};function validEmail(email){const re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(email)}const getModelName=thePath=>thePath.substring(thePath.lastIndexOf("/")+1);function parseMiles(str){var regex=new RegExp("mi|,","igm"),txt=str.replace(regex,"").trim();return parseInt(txt)}function init(){var sections={m:[],exterior:[],interior:[],layout:[],upgrades:[],services:[]},currencys=[],activeLevel=[];setTimeout(()=>{$(".div-block-257").removeClass("hidden")},300),$(".models").each((function(){sections.m.push({type:$(this).data("type"),name:$(this).data("name"),slug:$(this).data("slug"),price:$(this).data("price"),image:$(this).data("image")})})),$(".rendered-sections").each((function(){var type=$(this).data("type").toLowerCase(),description=$(this).closest(".w-dyn-item").find(".longer-description-html").html(),st=$(this).data("subtype"),exist_subtype=sections[type].find((function(item){return item.subtype==st&&1==item.active})),selection=$(this).data("selection").toLowerCase();selection=selection.includes("simple")?"simple":"multiple";var active=!exist_subtype&&"simple"==selection&&""==$(this).data("parent"),itt={type:$(this).data("type"),subtype:$(this).data("subtype"),namesubtype:$(this).data("namesubtype"),name:$(this).data("name"),slug:$(this).data("slug"),price:$(this).data("price"),image:$(this).data("image"),thumbnail:$(this).data("thumbnail"),description:description,active:active,show:!1,order:$(this).data("order"),selection:selection,object:$(this).data("object"),group:$(this).data("group"),material:$(this).data("material"),function:$(this).data("function"),parent:$(this).data("parent"),childs:[],activeLevel:[]};sections[type].push(itt)}));var parentHTML=$(ccM).parent().find(ccW).length>0?$(ccM).parent().find(ccW)[0].outerHTML:wrapperDefault,item=$(ccF).length>0?$(ccF)[0].outerHTML:itemDefault;$(ccM).parent().find(ccW).remove(),$(ccF).remove();var itemM=$(ccFM).length>0?$(ccFM)[0].outerHTML:itemDefault;$(ccFM).remove(),$(".btn-slides").each((function(i){$(this).find(".nav-bar-click-link").each((function(j){$(this).attr("x-bind:class","{'selected' : slideActive == '"+j+"', 'not-selective-link' : slideActive < '"+j+"'}")}))}));var childHtml={multiple:[],simple:[]},typeItem=["simple","multiple"];for(var i in typeItem){var type=typeItem[i];$("."+type+' [class^="box-level"]').each((function(i){var classLevel=$(this).attr("class").split(" ")[0],level=classLevel.replace("box-level-","");levels[type].push(level);var htmlParentLevel=$("."+classLevel)[0].outerHTML,$htmlParentLevel=$(htmlParentLevel),childLevel=$htmlParentLevel.find(".level-"+level)[0].outerHTML;$htmlParentLevel.find('*[class^="box-level"]').each((function(){$(this).remove()})),$htmlParentLevel.find(".level-"+level).remove();var htmlParentLevel=$htmlParentLevel[0].outerHTML;childHtml[type].push({level:level,html:htmlParentLevel,htmlchild:childLevel})}))}var parentHTML="";$(ccM).parent().find(ccW).length>0&&$(ccM).parent().find(ccW).each((function(){$(this).find(".items-section").length>0&&(parentHTML=$(this)[0].outerHTML)})),parentHTML=""==parentHTML?wrapperDefault:parentHTML;var item=$(ccF).length>0?$(ccF)[0].outerHTML:itemDefault;$(ccM).parent().find(ccW).remove(),$(ccF).remove();var itemM=$(ccFM).length>0?$(ccFM)[0].outerHTML:itemDefault;for(var s in $(ccFM).remove(),$(".btn-slides").each((function(i){$(this).find(".nav-bar-click-link").each((function(j){$(this).attr("x-bind:class","{'selected' : slideActive == '"+j+"', 'not-selective-link' : slideActive < '"+j+"'}")}))})),$(".button-wrapper").find("a").attr("x-bind:class",'{"invalid" : !valid}'),sections)if("m"!=s&&"services"!=s){var section=sections[s],subtypes=[],j=0;section.map((function(it){it.childs=section.filter(st=>st.parent===it.slug),it.childs.length>0&&it.active&&(it.childs[0].active=!0)})),section.map((function(tag){if(!subtypes.find(st=>st.value===tag.subtype)){var items=section.filter(st=>st.subtype===tag.subtype&&""==st.parent);subtypes.push({value:tag.subtype,title:tag.namesubtype,items:items})}})),subtypes.map((function(st){for(var l in activeLevel[st.value]=[],levels[st.items[0].selection]){var itemsChilds=0==l&&1==st.items[0].active?st.items[0].childs:[];activeLevel[st.value].push({level:l,items:itemsChilds})}var $parentHTML=$(parentHTML);$parentHTML.find(".title-subsection").text(st.title);var parentClass,htmlItems='<div role="list" class="'+$parentHTML.find(".items-section").attr("class")+'">';st.items.map((function(it){var $item="simple"==it.selection?$(item):$(itemM);$item.removeAttr("id"),$item.find(".parent").attr("id",it.slug),$item.find(".parent").attr("data-type",it.type);var vectary_function=it.function.toLowerCase().replace(" ","-");$item.find(".parent").attr("data-object",it.object).attr("data-group",it.group).attr("data-material",it.material).attr("data-function",it.function).addClass(vectary_function),$item.find("img.image").attr("src",it.thumbnail).attr("srcset",it.thumbnail),$item.find(".text-block").text(it.name),$item.find(".long_description").html(it.description),$item.find(".btn-details").attr("x-on:click",`showPop('${s}', ${j})`),$item.find(".details").attr("x-bind:class",'{"show" : studio.'+s+".selected["+j+"].show}").attr("x-on:click",`hidePop('${s}', ${j})`),j++;var $p=$item.find(".text-price"),h_price=$p.html();h_price&&(h_price=h_price.replace("{price}",it.price),$p.html(h_price),$item.find(".text-price span").attr("x-text","setCurrencyPrice("+it.price+", '+ $')")),0===it.price&&$p.addClass(hc),""==it.description&&$item.find(".btn-details").css({display:"none"}),it.active&&$item.addClass("selected"),$item.find(".parent").attr("data-selection",it.selection),$item.find(".w-embed span").attr("data-name",it.name).attr("data-type",it.type);for(var m=0;m<childHtml[it.selection].length;m++){var el=childHtml[it.selection][m],classList=$(el.html).find(".list").attr("class");$(el.html).find(".list").remove();var $itemChild=$(el.htmlchild);$itemChild.find(".image").attr("x-bind:src","option.thumbnail").attr("x-bind:srcset","option.thumbnail"),$itemChild.attr("x-bind:id","option.slug").attr("x-bind:data-type","option.type").attr("x-bind:data-level","'"+el.level+"'").attr("x-bind:class","{'selected' : option.active}");var childTemplate=`<template x-if="getShowLevel('${it.slug}', '${el.level}', '${it.type}') == true">\n                        <div class="${classList}"><template role="listitem" x-for="option in activeLevel['${it.subtype}'][${m}].items" :key="option">\n                        ${$itemChild[0].outerHTML}\n                        </template></div></template>`;$item.find(".box-level-"+el.level).html(childTemplate)}htmlItems+=$item[0].outerHTML})),htmlItems+="</div>",$parentHTML.find(".w-dyn-list").html(htmlItems),$("."+s+" "+ccM).parent().append($parentHTML)}))}$("input:required").attr("x-on:input","validate()"),$("form").attr("x-on:keydown.enter.prevent",""),$("#next-button").attr("href","javascript:void(0)"),$("form").attr("x-on:submit","submit(event)"),$(".currency-link").each((function(){var dataC=$(this).parent().find(".currency").data();$(this).attr("x-on:click",`changeCurrency('${dataC.currency}')`),currencys[dataC.currency]=dataC.value})),$(".p-currency").each((function(){var text=$(this).text();$(this).attr("x-text",`setCurrencyPrice('${text}')`)}));var imgshipping=$("#shipping-img").attr("src"),iSlide=0;$(".div-block-257 a").each((function(){var j=$(this).parent().find("a").length;iSlide==j&&(iSlide=0),$(this).attr("x-on:click","goSlide("+iSlide+")"),iSlide++}));var classitemOrder=$(ccS).length>0?$(ccS).children(":first-child").attr("class"):"summary-studio w-dyn-items",itemOrder=$(ccS).children().length>0?$(ccS).children(":first-child")[0].outerHTML:$(itemSummaryDefault)[0].outerHTML,$itemOrder=$(itemOrder),templateCustomOrder="";templateCustomOrder+='<template role="listitem" class="'+classitemOrder+'" x-for="item in studioItems" :key="item">',$itemOrder.find(".div-block-295").attr("x-bind:class","{'hidden' : item.type == 'model'}"),$itemOrder.find("img").attr("x-show","item.thumbnail").attr("x-bind:src","item.thumbnail").attr("x-bind:srcset","item.thumbnail"),$itemOrder.find(".price-text").attr("x-text","formatMoney(setCurrencyPrice(item.price), false)").removeClass(hc),$itemOrder.find(".title-tag").attr("x-text","item.name"),$itemOrder.find(".div-block-295").append(summaryHTML),templateCustomOrder+=$itemOrder.html()+"</template>",$(".custom-items").html(templateCustomOrder);let model=window.location.pathname;model=model.split("/").pop();var modelSelected=sections.m.find((function(m){return m.slug==model})),studio={model:modelSelected,price:formatter.format(modelSelected.price),load:0};for(sec in sections)"m"!=sec&&(studio[sec]={active:sections[sec].length>0?sections[sec][0]:{image:null,price:0},selected:sections[sec]});return{sections:sections,studio:studio,studioItems:[],active:!0,shipping:0,customer:customer,upgradesV:"",servicesV:"",interiorV:"",layoutV:"",exteriorV:"",valid:!0,currency:"USD",slideActive:0,summarySlide:slidesT.length-1,installationSlide:slidesT.length-2,show_furniture:!0,await:!0,activeLevel:activeLevel,runScript:!1,activeOptionLevel:{slug:"",levels:[]},init:function(){history.pushState(null,"","#size"),this.renderSelection(),this.studio.price=formatter.format(this.setCurrencyPrice(modelSelected.price)),this.setPrice();var _this=this;$slide.on("beforeChange",(function(e,s,c,nS){var uri=window.location.href;uri=uri.split("#")[0],_this.slideActive=nS,history.pushState({},null,uri+"#"+slidesT[nS])}))},setStudio:function(event){if(!this.runScript){this.runScript=!0;var target=event.target,$target=$(target).closest(".parent"),$child=null;if(0==$target.length&&($child=$(event.target).closest(".collection-item-5")),$target.length>0&&!$(event.target).hasClass("text-details")){var slug=$target.attr("id"),type=$target.data("type").toLowerCase(),tag,item=(tag=sections[type]).find((function(i){return i.slug==slug}));if($target.find(".section-3d").addClass("active"),"multiple"==item.selection)(item.active&&this.activeOptionLevel.slug==item.slug||!item.active||0==item.childs.length)&&($target.toggleClass("selected"),this.studio[type].selected.map((function(i){return i.slug==slug&&(i.active=!i.active),i})),item.childs.length>0&&!1===item.active&&item.childs.map((function(c){return c.active=!1})));else if("simple"==item.selection){$target.closest(".collection-list").find(".collection-item").removeClass("selected"),$target.parent().addClass("selected");var subtype=item.subtype;this.studio[type].selected.map((function(i){return i.subtype==subtype&&(i.active=!1),i.slug==slug&&(i.active=!i.active),i}))}for(var l=0;l<levels[item.selection].length;l++)this.activeLevel[item.subtype][l].items=[];item.childs.length>0&&(item.childs[0].active=!0),this.activeLevel[item.subtype][0].items=item.childs,this.activeOptionLevel={slug:"",levels:[]},item.childs.length>0&&item.active&&(this.activeOptionLevel={slug:item.slug,levels:[levels[item.selection][0]]}),this.studio[type].active=item,this.setPrice(),this.renderSelection()}else if($child.length>0){var slug=$child.attr("id"),type=$child.data("type").toLowerCase(),level=$child.data("level").toLowerCase(),tag,item=(tag=sections[type]).find((function(i){return i.slug==slug}));$child.parent().find(".collection-item-5").removeClass("selected"),$child.addClass("selected");var subtype=item.subtype,_this=this;this.studio[type].selected.map((function(i){return i.subtype==item.subtype&&(i.active=!1),i})),this.studio[type].selected.map((function(i){if(i.slug==slug){i.active=!i.active;var parent=i.parent;""!=parent&&_this.setParent(parent,type)}return i}));var l_index=levels[item.selection].findIndex((function(l){return l==level}));l_index++;var next_level=levels[item.selection][l_index];this.activeOptionLevel.levels.splice(l_index);for(var l=l_index;l<levels[item.selection].length;l++)this.activeLevel[item.subtype][l].items=[];item.childs.length>0&&(this.activeLevel[item.subtype][l_index].items=item.childs,this.activeOptionLevel.levels.push(next_level)),setTimeout((function(){_this.renderSelection(),_this.setPrice()}),200)}var _this=this;setTimeout((function(){_this.runScript=!1}),120)}},setParent(p,type){var _this=this;this.studio[type].selected.map((function(j){if(j.slug==p){j.active=!0;var parent=j.parent;""!=parent&&_this.setParent(parent,type)}return j}))},getShowLevel(slug,level,type){type=type.toLowerCase();var item=this.studio[type].selected.find((function(i){return i.slug==slug})),show;return this.activeOptionLevel.slug==slug&&this.activeOptionLevel.levels.includes(level)||item.active&&"simple"==item.selection},setPrice:function(){var total=modelSelected.price;for(const i in this.studio){var item=this.studio[i];if("model"!=i)if(null!=item.price)total=parseFloat(total)+parseFloat(item.price);else for(const j in this.studio[i].selected){var itemJ=this.studio[i].selected[j];itemJ.active&&(total=parseFloat(total)+parseFloat(itemJ.price))}}try{const service=new google.maps.DistanceMatrixService;var address=document.getElementById("Address").value.trim(),city=document.getElementById("City").value.trim(),state=document.getElementById("State").value.trim();if(""!==address&&""!==city&&""!==state){var dest="";dest+=address+","+city+","+state,service.getDistanceMatrix({origins:["9424 W Walton, Blanchard, MI","5617 104th Pl NE, Marysville, WA"],destinations:[dest],unitSystem:google.maps.UnitSystem.IMPERIAL,travelMode:google.maps.TravelMode.DRIVING,avoidHighways:!1,avoidTolls:!1},(response,status)=>{if("OK"==status){const michiganResult=lookup[getModelName(window.location.pathname)]["price-per-mile"]*parseMiles(response.rows[0].elements[0].distance.text),washingtonResult=lookup[getModelName(window.location.pathname)]["price-per-mile"]*parseMiles(response.rows[1].elements[0].distance.text);var price=michiganResult<washingtonResult?michiganResult:washingtonResult;price>=3e3?price-=1e3:price>=2500&&price<=2999&&(price-=500),"CAD"===this.currency&&(price+=250),shippingCost=price,total=parseFloat(total)+price,this.studio.price=formatter.format(this.setCurrencyPrice(total)),this.setLoan(total),this.renderSelection()}})}else total=parseFloat(total)+parseFloat(this.shipping),this.studio.price=formatter.format(this.setCurrencyPrice(total)),this.setLoan(total)}catch(error){total=parseFloat(total)+parseFloat(this.shipping),this.studio.price=formatter.format(this.setCurrencyPrice(total)),this.setLoan(total)}},setLoan:function(total){var tax=(parseFloat(8)+parseFloat(2.9)+parseFloat(2))/100,interest_rate=.0689,total_porcentage=Math.pow(1+.0689/12,-60);total_porcentage=total*(.0689/12)/(1-total_porcentage),total_porcentage=parseFloat(total_porcentage)+parseFloat(total*tax/60),total_porcentage=this.setCurrencyPrice(total_porcentage),this.studio.load=formatter.format(total_porcentage)+"/mo"},goSlide:function(slide){"next"==slide&&(slide=this.valid?parseInt(this.slideActive)+1:this.slideActive),this.valid=!0;var inputs=$("input:required").filter((function(i,elem){return""==$(elem).val()}));slide==this.summarySlide&&(inputs.length>0?this.valid=!1:(this.valid=!0,this.setPrice())),this.valid&&$("#slick-slide-control0"+slide).click(),slide==this.installationSlide&&inputs.length>0&&(this.valid=!1)},renderSelection(){this.studioItems=[];var b=sB,c=sC;for(const i in this.studio){var item=this.studio[i],value=[];if(!c.includes(i)&&null!=item&&b.includes(i)){var items=item.selected.filter((function(iJ){return iJ.active}));for(const j in items){value.push(items[j].name);let renderitem={type:items[j].type,name:items[j].name,slug:items[j].slug,price:items[j].price,image:items[j].image?items[j].image:null,thumbnail:items[j].thumbnail?items[j].thumbnail:null};this.studioItems.push(renderitem)}this[i+"V"]=value.join(", ")}}var localizedCost="CAD"===this.currency?shippingCost/currencys.CAD:shippingCost,shipText=shippingCost?"Shipping cost: "+formatter.format(localizedCost):"Estimated shipping";this.studioItems.push({type:"shipping",name:shipText,price:this.shipping,image:"",thumbnail:imgshipping}),this.studioItems.push(modelSelected)},formatMoney:function(price,show=!0){return show?formatter.format(price):0==price?show_zero_price:formatter.format(price)},changeZip:function(event){var zip_init=$("#zip-init").text(),zip_price=$("#zip-price").text(),zip=event.target.value,_this=this;""!=zip?$.get("https://api.zip-codes.com/ZipCodesAPI.svc/1.0/CalculateDistance/ByZip?fromzipcode="+zip_init+"&tozipcode="+zip+"&key="+zz).done((function(res){res.DistanceInMiles||0==res.DistanceInMiles?(_this.shipping=parseFloat(res.DistanceInMiles)*parseFloat(zip_price),_this.setPrice(),_this.renderSelection()):(_this.shipping=0,_this.renderSelection())})):(_this.shipping=0,_this.renderSelection())},validate:function(){var inputs;0==$("input:required").filter((function(i,elem){return""==$(elem).val()})).length?this.valid=!0:this.valid=!1},validateForm:function(){var slideActive,i=$(".w-slider-dot.w-active").index(),inputs;(i=parseInt(i)+parseInt(1))!=installationSlide?this.goSlide(i):0==$("input:required").filter((function(i,elem){return""==$(elem).val()})).length&&this.goSlide(i)},submit:function(event){var stripe=Stripe("pk_live_51IbUhkHy8pZ91dsyEHbItdV3dRUHfxAhBaBYaYQvVrofC3IoygYQcjbEaMUcDhaaWYOvCU30o3zm0hS5mVLZZBQi00nfYUtQmb"),priceID="price_1IiUe4Hy8pZ91dsyzSVEk4at",successURL="https://"+window.location.hostname+"/thank-you",cancelURL="https://"+window.location.hostname+"/payment-failure",emailElement,email=document.getElementById("Email").value,stripeArgs={lineItems:[{price:priceID,quantity:1}],mode:"payment",successUrl:successURL,cancelUrl:cancelURL};email&&validEmail(email)&&(stripeArgs.customerEmail=email),stripe.redirectToCheckout(stripeArgs).then((function(result){var displayError;result.error&&(document.getElementById("error-message").textContent=result.error.message,console.log(result.error.message))}))},changeCurrency:function(c){this.currency=c,this.setPrice(),$(document).find(".w-dropdown").each((function(i,el){$(el).triggerHandler("w-close.w-dropdown")}))},setCurrencyPrice:function(p,symbol=""){return symbol+" "+(p/currencys[this.currency]).toFixed(0)},showPop:function(s,i){this.studio[s].selected[i].show=!0},hidePop:function(s,i){this.studio[s].selected[i].show=!1},showFurniture:function(){var _this=this;this.await&&(this.await=!1,setTimeout((function(){_this.show_furniture=!_this.show_furniture,_this.await=!0}),120))}}}$(()=>{document.title="Configurator",loadScript("https://maps.googleapis.com/maps/api/js?key=AIzaSyDnH-26A_sEu0vzOa94U5Tfgukhf89ARCE&libraries=&v=weekly",redirectToStripe),loadScript("https://js.stripe.com/v3",redirectToStripe),$slide.slick({dots:!0,infinite:!1,arrows:!1,speed:500,fade:!0,cssEase:"linear",swipe:!1,swipeToSlide:!1}),$(".btn-slides").scroll(()=>{var l=$(this).scrollLeft();$(".btn-slides").scrollLeft()}),$("#open-3d-modal").click(()=>{$(".modal-pop-up._3d-model").removeClass("no-visible")}),$("#close-3d-modal").click(()=>{$(".modal-pop-up._3d-model").addClass("no-visible")})});